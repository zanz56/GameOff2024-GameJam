[gd_scene load_steps=9 format=3 uid="uid://d0w8u43w4qv5s"]

[ext_resource type="PackedScene" uid="uid://b03evrtyj3ug4" path="res://Scenes/Characters/Figure/figure.tscn" id="1_jp2ts"]
[ext_resource type="Texture2D" uid="uid://c615vljculmjv" path="res://Resources/Sprites/Characters/Figure/BigFigureHead.png" id="2_vl2aw"]
[ext_resource type="Texture2D" uid="uid://c6jhvfkjbqvro" path="res://Resources/Sprites/Characters/Figure/BigFigureBW.png" id="3_de3m3"]

[sub_resource type="Shader" id="Shader_mh2m2"]
resource_local_to_scene = true
code = "shader_type canvas_item;

uniform vec3 line_colour: source_color = vec3(1.0);
uniform int line_thickness: hint_range(0, 10) = 1;
uniform sampler2D screen_texture : hint_screen_texture, repeat_disable, filter_nearest;


void fragment() {
	
	
	
	vec2 size = SCREEN_PIXEL_SIZE * float(line_thickness);
	float line_alpha = 0.0;
	for (float i = -size.x; i <= size.x; i += SCREEN_PIXEL_SIZE.x) {
		for (float j = -size.y; j <= size.y; j += SCREEN_PIXEL_SIZE.y) {
			line_alpha += texture(screen_texture, SCREEN_UV + vec2(i, j)).a;
		}
	}
	vec4 colour = texture(screen_texture, SCREEN_UV);
	vec4 outline = vec4(line_colour, min(line_alpha, 1.0));
	if (colour.a > 0.0){
		COLOR.a = 0.0;
	}else{
		COLOR *= mix(outline, colour, colour.a);
	}
	
	
	
	
}
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_6uxcl"]
resource_local_to_scene = true
shader = SubResource("Shader_mh2m2")
shader_parameter/line_colour = Color(1, 1, 1, 1)
shader_parameter/line_thickness = 2

[sub_resource type="RectangleShape2D" id="RectangleShape2D_e404i"]
resource_local_to_scene = true
size = Vector2(7.00001, 52)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_l1ybd"]
resource_local_to_scene = true
size = Vector2(28, 44)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_6chgi"]
size = Vector2(40, 40)

[node name="BigFigure" instance=ExtResource("1_jp2ts")]

[node name="OutlineCreator" parent="." index="0"]
material = SubResource("ShaderMaterial_6uxcl")

[node name="OutlineHead" parent="OutlineCreator" index="0"]
position = Vector2(0, -32)
texture = ExtResource("2_vl2aw")

[node name="OutlineBody" parent="OutlineCreator" index="1"]
position = Vector2(0, -32)
texture = ExtResource("3_de3m3")

[node name="VisualNode" parent="." index="1"]
position = Vector2(0, 8)

[node name="HeadSprite" parent="VisualNode" index="0"]
position = Vector2(0, -40)
texture = ExtResource("2_vl2aw")

[node name="BodySprite" parent="VisualNode" index="1"]
position = Vector2(0, -40)
texture = ExtResource("3_de3m3")

[node name="CollisionShape2D" parent="." index="3"]
position = Vector2(1.90735e-06, -3.50001)
shape = SubResource("RectangleShape2D_e404i")

[node name="Aim" parent="." index="4"]
position = Vector2(0, -36)

[node name="Hurtbox" parent="." index="5"]
position = Vector2(0, 8)

[node name="CollisionShape2D" parent="Hurtbox" index="0"]
position = Vector2(0, -30)
shape = SubResource("RectangleShape2D_l1ybd")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="Hurtbox" index="1"]
position = Vector2(0, -28)
shape = SubResource("RectangleShape2D_6chgi")

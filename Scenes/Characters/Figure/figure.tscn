[gd_scene load_steps=18 format=3 uid="uid://b03evrtyj3ug4"]

[ext_resource type="Texture2D" uid="uid://chuuq4687815i" path="res://Resources/Sprites/Characters/Figure/FigureHead.png" id="1_b4tqu"]
[ext_resource type="Script" path="res://Scenes/Characters/Figure/figure.gd" id="1_rddm8"]
[ext_resource type="Texture2D" uid="uid://laxq4eaip0ef" path="res://Resources/Sprites/Characters/Figure/FigureBW.png" id="2_2rjca"]
[ext_resource type="Shader" path="res://Scenes/Characters/Figure/Outline.gdshader" id="2_8b22v"]
[ext_resource type="PackedScene" uid="uid://bc2ilgeapotia" path="res://Scenes/Components/hurtbox.tscn" id="4_8atyw"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_wokxc"]
resource_local_to_scene = true
shader = ExtResource("2_8b22v")
shader_parameter/line_colour = Color(1, 1, 1, 1)
shader_parameter/line_thickness = 2

[sub_resource type="ShaderMaterial" id="ShaderMaterial_07wqk"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_o2m3j"]
shader = ExtResource("2_8b22v")
shader_parameter/line_colour = Color(1, 1, 1, 1)
shader_parameter/line_thickness = 1

[sub_resource type="Animation" id="Animation_yismd"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("VisualNode/BodySprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [8]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("VisualNode/HeadSprite:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [8]
}

[sub_resource type="Animation" id="Animation_rx0ru"]
resource_name = "Spin"
length = 0.666675
loop_mode = 1
step = 0.0833333
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("VisualNode/BodySprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.0833333, 0.166667, 0.25, 0.333333, 0.416667, 0.5, 0.583333),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3, 4, 5, 6, 7]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("VisualNode/HeadSprite:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.0833333, 0.166667, 0.25, 0.333333, 0.416667, 0.5, 0.583333),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3, 4, 5, 6, 7]
}

[sub_resource type="Animation" id="Animation_l210k"]
resource_name = "WalkDown"
length = 0.500008
loop_mode = 1
step = 0.0833333
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("VisualNode/BodySprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.0833333, 0.166667, 0.25, 0.333333, 0.416667),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 1,
"values": [8, 9, 10, 11, 12, 13]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("VisualNode/HeadSprite:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.0833333, 0.166667, 0.25, 0.333333, 0.416667),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 1,
"values": [8, 9, 10, 11, 12, 13]
}

[sub_resource type="Animation" id="Animation_75ifu"]
resource_name = "WalkLeft"
length = 0.500008
loop_mode = 1
step = 0.0833333
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("VisualNode/BodySprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.0833333, 0.166667, 0.25, 0.333333, 0.416667),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 1,
"values": [20, 21, 22, 23, 24, 25]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("VisualNode/HeadSprite:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.0833333, 0.166667, 0.25, 0.333333, 0.416667),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 1,
"values": [20, 21, 22, 23, 24, 25]
}

[sub_resource type="Animation" id="Animation_rjr5l"]
resource_name = "WalkRight"
length = 0.500008
loop_mode = 1
step = 0.0833333
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("VisualNode/BodySprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.0833333, 0.166667, 0.25, 0.333333, 0.416667),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 1,
"values": [26, 27, 28, 29, 30, 31]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("VisualNode/HeadSprite:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.0833333, 0.166667, 0.25, 0.333333, 0.416667),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 1,
"values": [26, 27, 28, 29, 30, 31]
}

[sub_resource type="Animation" id="Animation_hfhr6"]
resource_name = "WalkUp"
length = 0.500008
loop_mode = 1
step = 0.0833333
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("VisualNode/BodySprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.0833333, 0.166667, 0.25, 0.333333, 0.416667),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 1,
"values": [14, 15, 16, 17, 18, 19]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("VisualNode/HeadSprite:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.0833333, 0.166667, 0.25, 0.333333, 0.416667),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 1,
"values": [14, 15, 16, 17, 18, 19]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_llbqb"]
_data = {
"RESET": SubResource("Animation_yismd"),
"Spin": SubResource("Animation_rx0ru"),
"WalkDown": SubResource("Animation_l210k"),
"WalkLeft": SubResource("Animation_75ifu"),
"WalkRight": SubResource("Animation_rjr5l"),
"WalkUp": SubResource("Animation_hfhr6")
}

[sub_resource type="RectangleShape2D" id="RectangleShape2D_5s3cd"]
resource_local_to_scene = true
size = Vector2(6.00002, 32)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ex47h"]
resource_local_to_scene = true
size = Vector2(20, 56)

[node name="Figure" type="CharacterBody2D"]
collision_layer = 2
motion_mode = 1
script = ExtResource("1_rddm8")
Player_Shot_speed = 15.0

[node name="OutlineCreator" type="CanvasGroup" parent="."]
visible = false
material = SubResource("ShaderMaterial_wokxc")

[node name="OutlineHead" type="Sprite2D" parent="OutlineCreator"]
position = Vector2(0, -39)
texture = ExtResource("1_b4tqu")
hframes = 32
frame = 20

[node name="OutlineBody" type="Sprite2D" parent="OutlineCreator"]
modulate = Color(0.113725, 0.188235, 0.796078, 1)
material = SubResource("ShaderMaterial_07wqk")
position = Vector2(0, -39)
texture = ExtResource("2_2rjca")
hframes = 32
frame = 20

[node name="VisualNode" type="Node2D" parent="."]
material = SubResource("ShaderMaterial_o2m3j")

[node name="HeadSprite" type="Sprite2D" parent="VisualNode"]
position = Vector2(0, -39)
texture = ExtResource("1_b4tqu")
hframes = 32
frame = 8

[node name="BodySprite" type="Sprite2D" parent="VisualNode"]
modulate = Color(0.113725, 0.188235, 0.796078, 1)
material = SubResource("ShaderMaterial_07wqk")
position = Vector2(0, -39)
texture = ExtResource("2_2rjca")
hframes = 32
frame = 8

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_llbqb")
}

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(-3.62003e-06, -2.99999)
rotation = 1.5708
shape = SubResource("RectangleShape2D_5s3cd")
debug_color = Color(0, 1, 0, 0.419608)

[node name="Aim" type="RayCast2D" parent="."]
position = Vector2(0, -44)
target_position = Vector2(1000, 0)

[node name="Hurtbox" parent="." node_paths=PackedStringArray("hurt_owner") instance=ExtResource("4_8atyw")]
input_pickable = true
hurt_owner = NodePath("..")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Hurtbox"]
position = Vector2(0, -28)
shape = SubResource("RectangleShape2D_ex47h")

[connection signal="frame_changed" from="VisualNode/HeadSprite" to="." method="_on_head_sprite_frame_changed"]
[connection signal="frame_changed" from="VisualNode/BodySprite" to="." method="_on_body_sprite_frame_changed"]
[connection signal="input_event" from="Hurtbox" to="." method="_on_hurtbox_input_event"]
